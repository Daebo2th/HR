<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="dev">
	<select id="selectOneUser" parameterType="Integer" resultType="com.kosa.hrsystem.vo.MyPageVO">
		select  
			emp_num, emp_name, direct_num, 
			dept, rank, permission_type, annual_num, 
			hire_date, departure_date, email, 
			phone, post_code, address, detail_address		
		from EMP 
		where emp_num = #{emp_num}
	</select>
	<select id="searchPwd" parameterType="HashMap" resultType="String">
    	select pwd from EMP where email = #{email, jdbcType=VARCHAR} and regist_num = #{regist_num, jdbcType=VARCHAR}
    </select>
    <select id="searchId" parameterType="HashMap" resultType="String">
    	select email from EMP where emp_name = #{emp_name, jdbcType=VARCHAR} and regist_num = #{regist_num, jdbcType=VARCHAR}
    </select>
    <select id="checkEmail" parameterType="String" resultType="Integer">
    	select count(*) from EMP where email = #{email}
    </select>
    <select id="selectByEmail" parameterType="HashMap" resultType="com.kosa.hrsystem.dto.EmpDTO">
		select email, emp_num, emp_name, permission_type from EMP where email=#{email} AND pwd = #{pwd}
	</select>	
	<select id="selectAllEmp" resultType="com.kosa.hrsystem.dto.EmpDTO">
		SELECT * FROM EMP
	</select>
	<insert id="insertEmp" parameterType="com.kosa.hrsystem.dto.EmpDTO" >
		insert into EMP(emp_num,emp_name,email,pwd,hire_date,departure_date,reason,direct_num,phone,regist_num,annual_num,post_code,address,detail_address,permission_type,dept,rank) values(
			#{emp_num},#{emp_name},#{email},#{pwd},#{hire_date},#{departure_date, jdbcType=DATE},#{reason},#{direct_num},#{phone},#{regist_num},12.0,#{post_code},#{address},#{detail_address},#{permission_type},#{dept},#{rank})
	</insert>
	<update id="updateEmp" parameterType="com.kosa.hrsystem.dto.EmpDTO">
		update EMP set emp_name = #{emp_name},
					 dept = #{dept},
					 rank = #{rank},
					 phone = #{phone},
					 permission_type = #{permission_type},
					 direct_num = #{direct_num},
					 post_code = #{post_code},
					 address = #{address},
					 detail_address = #{detail_address},
					 reason = #{reason, jdbcType=VARCHAR},
					 remarks = #{remarks, jdbcType=VARCHAR},
					 hire_date = #{hire_date},
					 departure_date = #{departure_date, jdbcType=DATE}
					 where emp_num = #{emp_num}	
	</update>
	<update id="updatePwd" parameterType="HashMap">
		update EMP set pwd = #{pwd} where email = #{email}
	</update>
	<update id="updateOneUser" parameterType="com.kosa.hrsystem.dto.EmpDTO">
		update EMP set emp_name = #{emp_name},
					 phone = #{phone},
					 post_code = #{post_code},
					 address = #{address},
					 detail_address = #{detail_address}
					 where emp_num = #{emp_num}
	</update>
	<delete id="deleteEmp" parameterType="Integer">
		delete from EMP where emp_num = #{emp_num}
	</delete>
</mapper>